---
import Layout from '../layouts/Layout.astro'
import Header from '../components/Header.astro'
import PortfolioSection from '../components/PortfolioSection.astro'
import ContactSection from '../components/ContactSection.astro'
import Footer from '../components/Footer.astro'
import Modal from '../components/Modal.astro'
---

<script>
  import createModalController from '../controllers/modalController'
  import '../controllers/projectsStore'
  /* global Alpine */
  document.addEventListener('alpine:init', () => {
    Alpine.data('modalController', createModalController)
  })
</script>

<Layout title="Полина Мигранова | Графический дизайнер">
  <main
    id="main-content"
    class="bg-primary text-white min-h-screen"
    x-data="modalController"
  >
    <Header />
    <PortfolioSection />
    <ContactSection />
    <Footer />

    <Modal />

    <!-- Полноэкранный просмотр изображения -->
    <div
      x-show="isImageZoomed"
      x-on:click.self="closeZoom()"
      class="fixed inset-0 z-[60] flex items-center justify-center p-4"
      style="display: none; background: rgba(0, 0, 0, 0.95); backdrop-filter: blur(8px);"
      x-transition:enter="transition ease-out duration-300"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
      x-transition:leave="transition ease-in duration-200"
      x-transition:leave-start="opacity-100"
      x-transition:leave-end="opacity-0"
    >
      <div class="relative w-full h-full flex items-center justify-center">
        <!-- Увеличенное изображение -->
        <img
          x-bind:src="currentSlide?.image?.src || ''"
          x-bind:alt="(currentProject?.title || '') + ' - слайд ' + (currentSlideIndex + 1) + ' (увеличено)'"
          class="max-w-full max-h-full object-contain cursor-zoom-out"
          x-on:click="closeZoom()"
          title="Нажмите для закрытия"
        />

        <!-- Подсказка -->
        <div
          class="absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black/50 backdrop-blur-sm rounded-lg px-4 py-2"
        >
          <p class="text-white/80 text-sm font-onest" id="close-hint">
            клик для закрытия
          </p>
        </div>
      </div>
    </div>
  </main>
</Layout>
